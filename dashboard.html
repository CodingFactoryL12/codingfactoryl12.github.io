<!doctype html>
<html lang="de">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Dashboard</title>

		<style>
			/* ===== GLOBAL ===== */
			body {
				margin: 0;
				background: #0d0d0d;
				color: #fff;
				font-family: Arial, sans-serif;
				overflow-x: hidden;
			}

			/* ===== HEADER ===== */
			.dash-header {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 64px;
				background: #111;
				border-bottom: 1px solid #222;
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 0 16px;
				z-index: 300;
				box-sizing: border-box;
			}

			.header-left {
				display: flex;
				align-items: center;
				gap: 12px;
			}

			.logo {
				color: #fff;
				font-size: 20px;
				text-decoration: none;
				font-weight: bold;
				white-space: nowrap;
			}

			/* ===== HAMBURGER IM HEADER ===== */
			.dash-hamburger {
				width: 26px;
				height: 18px;
				display: flex;
				flex-direction: column;
				justify-content: space-between;
				cursor: pointer;
			}

			.dash-hamburger span {
				height: 3px;
				background: #fff;
				border-radius: 3px;
				transition: 0.3s;
			}

			/* ===== LOGIN STATUS ===== */
			.login-status {
				display: flex;
				align-items: center;
				gap: 10px;
				color: #ccc;
				font-size: 14px;
				white-space: nowrap;
			}

			.user-role {
				color: #fff;
				font-weight: bold;
			}

			/* ===== LOGOUT BUTTON ===== */
			.logout-small {
				background: #b30000;
				color: #fff;
				border: 1px solid #660000;
				padding: 8px 14px;
				border-radius: 8px;
				cursor: pointer;
				font-size: 14px;
				font-weight: bold;
				transition: 0.25s ease;
			}

			.logout-small:hover {
				background: #ff0000;
				transform: scale(1.06);
				box-shadow: 0 0 10px #ff000055;
			}

			/* ===== SIDEBAR (unterhalb des Headers) ===== */
			.dash-sidebar {
				position: fixed;
				top: 64px; /* direkt unter Header */
				left: -240px;
				width: 240px;
				height: calc(100vh - 64px);
				background: #111;
				padding: 20px 20px;
				box-sizing: border-box;
				transition: 0.3s ease;
				border-right: 1px solid #222;
				z-index: 250;
			}

			.dash-sidebar.active {
				left: 0;
			}

			.dash-sidebar h2 {
				margin: 0 0 16px 0;
				font-size: 20px;
			}

			.dash-sidebar nav a {
				display: block;
				padding: 10px 0;
				color: #ccc;
				text-decoration: none;
				font-size: 16px;
				transition: 0.2s;
			}

			.dash-sidebar nav a:hover {
				color: #fff;
				padding-left: 8px;
			}

			/* ===== CONTENT ===== */
			.dash-content {
				padding: 80px 24px 24px; /* nur wenig Abstand unter Header */
				box-sizing: border-box;
				max-width: 100%;
			}

			.welcome-box,
			.status-box,
			.request-bar-container {
				background: #1a1a1a;
				padding: 20px;
				border-radius: 12px;
				border: 1px solid #222;
				margin-bottom: 20px;
			}

			#dynamic-welcome {
				font-size: 24px;
				font-weight: 600;
				opacity: 0;
				transition: opacity 0.6s ease;
			}

			.status-online {
				color: #4caf50;
				font-weight: bold;
			}

			.request-bar {
				height: 10px;
				background: #333;
				border-radius: 6px;
				overflow: hidden;
				margin-top: 8px;
			}

			.request-bar-fill {
				height: 100%;
				background: #4caf50;
				width: 40%;
				transition: width 0.3s;
			}

			/* ===== RESPONSIVE ===== */

			@media (max-width: 768px) {
				.dash-header {
					padding: 0 10px;
				}

				.logo {
					font-size: 18px;
				}

				.login-status {
					font-size: 12px;
					gap: 6px;
				}

				.logout-small {
					padding: 6px 10px;
					font-size: 12px;
				}

				.dash-sidebar {
					width: 210px;
				}

				.dash-content {
					padding: 84px 16px 16px;
				}

				#dynamic-welcome {
					font-size: 20px;
				}
			}

			@media (max-width: 480px) {
				.dash-header {
					height: 60px;
				}

				.dash-sidebar {
					top: 60px;
					height: calc(100vh - 60px);
					width: 200px;
				}

				.logo {
					font-size: 16px;
				}

				.dash-content {
					padding: 80px 12px 12px;
				}

				.welcome-box,
				.status-box,
				.request-bar-container {
					padding: 16px;
					font-size: 15px;
				}

				#dynamic-welcome {
					font-size: 18px;
				}
			}
		</style>
	</head>

	<body>
		<!-- HEADER -->
		<header class="dash-header">
			<div class="header-left">
				<div class="dash-hamburger" onclick="toggleDashSidebar()">
					<span></span>
					<span></span>
					<span></span>
				</div>
				<a href="index.html" class="logo">CodingFactoryL</a>
			</div>

			<div class="login-status">
				Eingeloggt als <span class="user-role">admin</span>
				<button class="logout-small" onclick="logout()">Logout</button>
			</div>
		</header>

		<!-- Sidebar -->
		<aside class="dash-sidebar">
			<h2>Menü</h2>
			<nav>
				<a href="dashboard.html">Dashboard</a>
				<a href="tools.html">Tools</a>
				<a href="ki.html">KI‑Features</a>
				<a href="/settingspage.html">Einstellungen</a>
			</nav>
		</aside>

		<!-- Dashboard Content -->
		<main class="dash-content">
			<div class="welcome-box">
				<span id="dynamic-welcome"></span>
			</div>

			<div class="status-box">Serverstatus: <span class="status-online">Online</span></div>

			<div class="request-bar-container">
				API‑Anfragen übrig: 40 / 100
				<div class="request-bar">
					<div class="request-bar-fill"></div>
				</div>
			</div>
		</main>

		<script>
			// === Sidebar Toggle ===
			function toggleDashSidebar() {
				document.querySelector(".dash-sidebar").classList.toggle("active");
			}

			// === LOGIN CHECK ===
			const loggedInUser = localStorage.getItem("loggedInUser");

			// Wenn kein User eingeloggt → zurück zum Login
			if (!loggedInUser) {
				window.location.href = "login.html";
			}

			// Benutzername im Header einsetzen
			document.querySelector(".user-role").textContent = loggedInUser;

			// === LOGOUT ===
			function logout() {
				localStorage.removeItem("loggedInUser");
				window.location.href = "index.html";
			}

			// === Dynamische Willkommensnachrichten ===
			const welcomeMessages = [
				`Willkommen zurück, ${loggedInUser}`,
				`Schön dich wieder zu sehen, ${loggedInUser}`,
				`${loggedInUser}, bereit für neue Projekte?`,
				`Was möchtest du heute machen, ${loggedInUser}?`,
				`Lass uns etwas Großartiges bauen, ${loggedInUser}`,
			];

			let welcomeIndex = 0;
			const welcomeElement = document.getElementById("dynamic-welcome");

			function updateWelcome() {
				welcomeElement.style.opacity = 0;

				setTimeout(() => {
					welcomeElement.textContent = welcomeMessages[welcomeIndex];
					welcomeElement.style.opacity = 1;
					welcomeIndex = (welcomeIndex + 1) % welcomeMessages.length;
				}, 600);
			}

			updateWelcome();
			setInterval(updateWelcome, 4000);
		</script>

		<script src="footer.js"></script>
		<custom-footer></custom-footer>
	</body>
</html>
